name: azuracast

services:
  web:
    container_name: azuracast
    image: "ghcr.io/azuracast/azuracast:${AZURACAST_VERSION:-latest}"
    labels:
      - com.centurylinklabs.watchtower.scope=azuracast

      # (Opsiyonel) Coolify proxy label’ları gerekiyorsa Coolify zaten kendisi ekliyor.
      # Buraya elle label eklemeye genelde gerek yok.

    # ✅ Coolify ile çakışmaması için 80/443 host mapping KALDIRILDI.
    # Coolify domain yönlendirmeyi proxy üzerinden container’ın 80 portuna yapacak.
    #
    # Eğer Coolify “port seç” isterse: internal port 80.

  ports:
  - "${AZURACAST_SFTP_PORT:-2022}:2022"

  - "18000:8000"
  - "18005:8005"
  - "18006:8006"
  - "18010:8010"
  - "18015:8015"
  - "18016:8016"
  - "18020:8020"
  - "18025:8025"
  - "18026:8026"
  - "18030:8030"
  - "18035:8035"
  - "18036:8036"
  - "18040:8040"
  - "18045:8045"
  - "18046:8046"
  - "18050:8050"
  - "18055:8055"
  - "18056:8056"
  - "18060:8060"
  - "18065:8065"
  - "18066:8066"
  - "18070:8070"
  - "18075:8075"
  - "18076:8076"
  - "18090:8090"
  - "18095:8095"
  - "18096:8096"
  - "18100:8100"
  - "18105:8105"
  - "18106:8106"
  - "18110:8110"
  - "18115:8115"
  - "18116:8116"
  - "18120:8120"
  - "18125:8125"
  - "18126:8126"
  - "18130:8130"
  - "18135:8135"
  - "18136:8136"
  - "18140:8140"
  - "18145:8145"
  - "18146:8146"
  - "18150:8150"
  - "18155:8155"
  - "18156:8156"
  - "18160:8160"
  - "18165:8165"
  - "18166:8166"
  - "18170:8170"
  - "18175:8175"
  - "18176:8176"
  - "18180:8180"
  - "18185:8185"
  - "18186:8186"
  - "18190:8190"
  - "18195:8195"
  - "18196:8196"
  - "18200:8200"
  - "18205:8205"
  - "18206:8206"
  - "18210:8210"
  - "18215:8215"
  - "18216:8216"
  - "18220:8220"
  - "18225:8225"
  - "18226:8226"
  - "18230:8230"
  - "18235:8235"
  - "18236:8236"
  - "18240:8240"
  - "18245:8245"
  - "18246:8246"
  - "18250:8250"
  - "18255:8255"
  - "18256:8256"
  - "18260:8260"
  - "18265:8265"
  - "18266:8266"
  - "18270:8270"
  - "18275:8275"
  - "18276:8276"
  - "18280:8280"
  - "18285:8285"
  - "18286:8286"
  - "18290:8290"
  - "18295:8295"
  - "18296:8296"
  - "18300:8300"
  - "18305:8305"
  - "18306:8306"
  - "18310:8310"
  - "18315:8315"
  - "18316:8316"
  - "18320:8320"
  - "18325:8325"
  - "18326:8326"
  - "18330:8330"
  - "18335:8335"
  - "18336:8336"
  - "18340:8340"
  - "18345:8345"
  - "18346:8346"
  - "18350:8350"
  - "18355:8355"
  - "18356:8356"
  - "18360:8360"
  - "18365:8365"
  - "18366:8366"
  - "18370:8370"
  - "18375:8375"
  - "18376:8376"
  - "18380:8380"
  - "18385:8385"
  - "18386:8386"
  - "18390:8390"
  - "18395:8395"
  - "18396:8396"
  - "18400:8400"
  - "18405:8405"
  - "18406:8406"
  - "18410:8410"
  - "18415:8415"
  - "18416:8416"
  - "18420:8420"
  - "18425:8425"
  - "18426:8426"
  - "18430:8430"
  - "18435:8435"
  - "18436:8436"
  - "18440:8440"
  - "18445:8445"
  - "18446:8446"
  - "18450:8450"
  - "18455:8455"
  - "18456:8456"
  - "18460:8460"
  - "18465:8465"
  - "18466:8466"
  - "18470:8470"
  - "18475:8475"
  - "18476:8476"
  - "18480:8480"
  - "18485:8485"
  - "18486:8486"
  - "18490:8490"
  - "18495:8495"
  - "18496:8496"

    env_file:
      - azuracast.env
      - .env

    volumes:
      - "station_data:/var/azuracast/stations"
      - "backups:/var/azuracast/backups"
      - "db_data:/var/lib/mysql"
      - "www_uploads:/var/azuracast/storage/uploads"
      - "shoutcast2_install:/var/azuracast/storage/shoutcast2"
      - "stereo_tool_install:/var/azuracast/storage/stereo_tool"
      - "rsas_install:/var/azuracast/storage/rsas"
      - "geolite_install:/var/azuracast/storage/geoip"
      - "sftpgo_data:/var/azuracast/storage/sftpgo"
      - "acme:/var/azuracast/storage/acme"

    restart: unless-stopped

    ulimits:
      nofile:
        soft: 65536
        hard: 65536

    logging:
      options:
        max-size: 1m
        max-file: "5"

  updater:
    container_name: azuracast_updater
    image: "ghcr.io/azuracast/updater:latest"
    restart: unless-stopped
    volumes:
      - "/var/run/docker.sock:/var/run/docker.sock"
    logging:
      options:
        max-size: 1m
        max-file: "5"

volumes:
  db_data: {}
  acme: {}
  shoutcast2_install: {}
  stereo_tool_install: {}
  rsas_install: {}
  geolite_install: {}
  sftpgo_data: {}
  station_data: {}
  www_uploads: {}
  backups: {}
